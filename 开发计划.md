# ReceiptName MVP开发计划

## MVP核心理念

**最小可行产品（MVP）**：快速验证核心价值假设，用最少的功能实现用户价值。

### 核心价值假设
- 用户需要自动识别交易记录图片
- 用户希望根据金额重命名文件
- 火山引擎OCR服务能满足识别需求

## MVP功能范围

### ✅ 核心功能（必须实现）
1. **图片扫描** - 扫描当前目录下的图片文件
2. **OCR识别** - 使用火山引擎提取图片文字
3. **交易判断** - 识别微信支付、支付宝交易记录
4. **金额提取** - 提取交易金额
5. **文件重命名** - 重命名为"金额_支付凭证"格式

### ❌ 非MVP功能（暂不实现）
- 图形界面
- 批量文件夹处理
- 交易记录导出
- 处理历史记录
- 复杂的错误处理

## 开发阶段（2周完成）

### 第一周：基础功能实现

#### Day 1-2: 环境搭建 ✅
- [x] 项目结构创建
- [x] 依赖配置
- [ ] 火山引擎API配置
- [ ] 基础测试环境

#### Day 3-4: OCR服务集成
- [ ] 创建 `ocr_service.py`
- [ ] 实现火山引擎ARK调用
- [ ] 图片预处理功能
- [ ] 基础错误处理

#### Day 5-7: 核心逻辑开发
- [ ] 创建 `receipt_detector.py`
- [ ] 实现交易记录识别
- [ ] 实现金额提取
- [ ] 创建 `file_renamer.py`

### 第二周：集成与测试

#### Day 8-10: 主程序集成
- [ ] 更新 `main.py`
- [ ] 实现文件扫描逻辑
- [ ] 集成所有模块
- [ ] 基础用户交互

#### Day 11-14: 测试与优化
- [ ] 功能测试
- [ ] 错误处理完善
- [ ] 性能优化
- [ ] 文档更新

## 技术实现

### 项目结构（简化版）
```
ReceiptName/
├── main.py                 # 主程序入口
├── ocr_service.py          # OCR服务
├── receipt_detector.py     # 交易记录检测
├── file_renamer.py         # 文件重命名
├── pyproject.toml          # 项目配置
├── README.md              # 项目文档
└── .env.example           # 环境变量示例
```

### 核心算法

#### 交易记录识别
```python
def is_receipt(text: str) -> bool:
    """判断文本是否为交易记录"""
    keywords = ['微信支付', '支付宝', '交易成功', '支付成功']
    return any(keyword in text for keyword in keywords)
```

#### 金额提取
```python
def extract_amount(text: str) -> Optional[float]:
    """提取金额"""
    import re
    # 匹配数字金额模式
    pattern = r'(\d+\.?\d*)\s*元'
    match = re.search(pattern, text)
    return float(match.group(1)) if match else None
```

## 成功标准

### MVP验证指标
1. **功能完整性** - 能够识别并重命名交易记录
2. **准确性** - 识别准确率 > 80%
3. **易用性** - 用户能在5分钟内完成配置和使用
4. **稳定性** - 基本错误处理，不会崩溃

### 用户反馈收集
- 识别准确率如何？
- 使用过程是否顺畅？
- 是否解决了文件管理问题？
- 还需要什么功能？

## 风险评估

### 技术风险
- **OCR识别准确率低** → 优化关键词匹配
- **API调用失败** → 实现重试机制
- **文件重命名冲突** → 添加序号后缀

### 时间风险
- **开发进度延迟** → 简化功能，专注核心
- **测试时间不足** → 重点测试核心流程

## 后续规划

### 基于MVP反馈的功能扩展
1. **用户反馈分析** - 收集使用数据和反馈
2. **功能优先级排序** - 根据用户需求调整
3. **迭代开发** - 逐步添加有价值的功能

### 可能的扩展方向
- 支持更多交易类型
- 批量文件夹处理
- 图形界面
- 处理进度显示
- 配置文件支持

## 开发原则

### MVP开发原则
1. **快速验证** - 优先实现核心价值
2. **简单优先** - 避免过度设计
3. **用户导向** - 基于实际需求开发
4. **迭代改进** - 根据反馈持续优化

### 代码质量
- 基本错误处理
- 清晰的函数命名
- 必要的注释
- 简单的测试覆盖

---

**开发周期**: 2周  
**团队规模**: 1-2人  
**项目状态**: MVP开发中  
**目标**: 快速验证核心价值假设 